;******************************************************************************
;*** Poison Spray *************************************************************
;******************************************************************************

;------------------------------------------------------------------------------
[WeaponTypes]
+				= ToxinSpray
+				= ToxinSprayE
+				= TankToxinSpray
+				= TankToxinSprayE
+				= EmplacementToxinSpray
+				= EmplacementToxinSprayE

;------------------------------------------------------------------------------
; Chem Trooper
[ToxinSpray]
Damage				= 1			; 70
AmbientDamage			= 20			; From BioToxin_LaoTze. 2019/8 
ROF				= 50
Range				= 3.5
Projectile			= BillowGreen
Speed				= 1			; From BioToxin_LaoTze. Was 12, not sure where that was from. 
Warhead				= Toxin			; GasPoison
Report				= Spray
Anim				= JetGreen
AssaultAnim			= PuffGreen
;UseFireParticles		= yes
UseSparkParticles		= yes			; NEW WAY: From BioToxin_LaoTze. 2019/8
AttachedParticleSystem		= ToxinSpraySys		; Ditto. 



; Bio Toxin Spray
[BioToxin]
ROF=55
Range=6
MinimumRange=.9
Projectile=InvisibleA

;------------------------------------------------------------------------------
[ToxinSprayE]
Damage=1
AmbientDamage=30
ROF=45
Range=6.5
MinimumRange=.9
Projectile=InvisibleA
Speed=1
Warhead=Toxin
Report=BioSpray
UseSparkParticles=yes
AttachedParticleSystem=ToxinSpraySys

[ChemSprayE]
Damage=85
ROF=50
Range=3.5
Projectile=ChemballE
Speed=12
Warhead=PsychGas
Report=FlamerAttack


[TowerChemSpray]
Damage=120
ROF=50
Range=3.5
Projectile=Chemcloud
Speed=12
Warhead=Gas
Report=SubAttack;FlamerAttack



[PoisonSpray]
Warhead=Gas
Damage=1
Range=3 ;4
Report=FLAMTNK1
ROF=100
Speed=100
Anim=GASLGMK
Projectile=InvisibleLow

;------------------------------------------------------------------------------
; Big Spray
[TankToxinSpray]
Damage				= 1			; Was 160, Elite was 200
AmbientDamage			= 30			; From BioToxin_LaoTze. 2019/8
ROF				= 40			; Was 0, moved to Elite. 
Burst				= 6			; From Elite. 
Range				= 6			; 3
Projectile			= ToxinPuff
Speed				= 12
Warhead				= Gas
Report				= Spray

;------------------------------------------------------------------------------
[TankToxinSprayE]:[TankToxinSpray]
;Damage				= 0	; 15 ; 35
AmbientDamage			= 35	; Let's hope this works and we won't need a new projectile/particlesystem. 
ROF				= 0

;------------------------------------------------------------------------------
; Gen/ZH's Chem_TunnelNetworkGunBeta
[EmplacementToxinSpray]
;----- Payload -----
Damage				= 1			; 120
AmbientDamage			= 30			; From BioToxin_LaoTze. 2019/8
DamageType= POISON
Warhead= Poison

ROF				= 0;50
Range				= 6;3.5
Projectile			= ToxinPuff
Speed				= 12
Warhead				= TESTWH;Toxin			; ToxinGasCreate
Report				= SubAttack		; FlamerAttack

;----- GFX -----
WeaponRecoil= 0
DeathType= POISONED_BETA

PrimaryDamage               = 10.0 ;20.0            
  PrimaryDamageRadius         = 10   ;20.0      
  ScatterRadiusVsInfantry     = 0.0     ;When this weapon is used against infantry, it can randomly miss by as much as this distance.
  AttackRange                 = 160.0
  MinimumAttackRange          = 0 ;20.0
  WeaponSpeed                 = 600                     ;  dist/sec
  ProjectileObject            = ToxinTruckStreamProjectileUpgraded
  FireFX                      = WeaponFX_ToxinTruckFlameWeaponUpgraded
  ProjectileDetonationFX      = WeaponFX_ToxinTruckMissileDetonationUpgraded
  FireSound                   = ToxinTractorWeaponLoop
  FireSoundLoopTime           = 80                ; loop the firing sound until there's this much delay between shots 
  RadiusDamageAffects         = ALLIES ENEMIES NEUTRALS
  DelayBetweenShots           = 40                ; time between shots, msec
  ClipSize                    = 30                         ; how many shots in a Clip (0 == infinite)
  ClipReloadTime              = 40                   ; how long to reload a Clip, msec
  ProjectileStreamName        = ToxinTruckProjectileStreamUpgraded ; Drawing helper for this weapon.  Tracks all projectiles in air
  ProjectileCollidesWith      = ENEMIES STRUCTURES WALLS SHRUBBERY
  AllowAttackGarrisonedBldgs  = Yes
End

;------------------------------------------------------------------------------
; Gen/ZH's Chem_TunnelNetworkGunGamma
[EmplacementToxinSpray_B]
  PrimaryDamage               = 12.5  ;60.0            
  PrimaryDamageRadius         = 10.0  ;20.0      
  ScatterRadiusVsInfantry     = 0.0     ;When this weapon is used against infantry, it can randomly miss by as much as this distance.
  AttackRange                 = 160.0
  MinimumAttackRange          = 0 ;20.0
  DamageType                  = POISON
  DeathType                   = POISONED_GAMMA
  WeaponSpeed                 = 600                     ;  dist/sec 
  WeaponRecoil                = 0                      ; angle to deflect the model when firing
  ProjectileObject            = GC_Chem_ToxinStreamProjectile
  FireFX                      = GC_Chem_WeaponFX_ToxinFlameWeaponGamma
  ProjectileDetonationFX      = GC_Chem_WeaponFX_ToxinMissileDetonationGamma
  FireSound                   = ToxinTractorWeaponLoop
  FireSoundLoopTime           = 80                ; loop the firing sound until there's this much delay between shots 
  RadiusDamageAffects         = ALLIES ENEMIES NEUTRALS
  DelayBetweenShots           = 40                ; time between shots, msec
  ClipSize                    = 30                         ; how many shots in a Clip (0 == infinite)
  ClipReloadTime              = 40                   ; how long to reload a Clip, msec
  ProjectileStreamName        = GC_Chem_ToxinProjectileStream ; Drawing helper for this weapon.  Tracks all projectiles in air
  ProjectileCollidesWith      = ENEMIES STRUCTURES WALLS SHRUBBERY
  AllowAttackGarrisonedBldgs  = Yes
End


[ChemLauncher20]
Damage=10
Range=2
Projectile=Invisible
ROF=50
Warhead=Gas

;------------------------------------------------------------------------------
; AoE chemical spray
[FumaroleToxinSpray]
Damage				= 70
ROF				= 30
Projectile			= InvisibleA
ProjectileRange			= 0
Range				= 255;3
Speed				= 30
Warhead				= GasCreate
Report				= ChaosDroneAttack
;Burst=4
OmniFire			= yes
AreaFire			= yes

[ToxinSpraySys]
HoldsWhat			= ToxinSpray
Spawns=yes
SpawnFrames=2
BehavesLike			= Fire
Lifetime			= 25

;------------------------------------------------------------------------------
[ParticleSystems]
= ToxinStreamSystem			; System for poison drifting rapidly in one direction. 
= ToxinDriftSystem			; System for poison drifting randomly about. 
= ToxinRiseSystem			; System for poison drifting _upwards_. (This might be generalizable to ToxinSpraySystem, but so far, we've not figured out how.) 

;------------------------------------------------------------------------------
[Particles]
= ToxinPuffM
= ToxinPuff
= ToxinPuffD


[ClusterInvisibleLow]
Cluster=3
Image=none
Inviso=yes
High=no

[ChemicalBeamSys]
HoldsWhat=GasCloud1
BehavesLike=Railgun
SpiralRadius=14
ParticlesPerCoord=.01
SpiralDeltaPerCoord=.035
MovementPerturbationCoefficient=.3
PositionPerturbationCoefficient=20
VelocityPerturbationCoefficient=.6
Laser=yes
LaserColor=0,255,0

;------------------------------------------------------------------------------
; wizard's fireball
[Fireball]

;----- Base Attributes -----
BehavesLike			= 

;----- AI State -----

;----- GFX -----
Image				= FIREBALL
Animates			= yes
Frames				= 8
Shadow				= no
NoShadow			= yes

;----- Movement -----
Arcing				= yes
Inaccurate			= yes
FlakScatter			= yes
High				= no
SubjectToWalls			= yes
SubjectToElevation		= yes
SubjectToCliffs			= yes

;------------------------------------------------------------------------------
; Wizard's Stinking Cloud
; Cloud of Poison Gas ; Cloud of Poison Gas #1 <= #2 is used for Corrosive now. 
; Intended to combine GasCloud with the projectile we originally used, with the updated projectile we use, with ToxinSpray_LaoTze. 
[ToxinPuff];[ToxinSpray];[GasCloud1]

;----- Base Attributes -----
BehavesLike			= Gas		; Presumably, only the BehavesLike of the ParticleSystem matters when this is spawned by one. Was "Fire". 
MaxEC				= 1000		; LaoTze: 500, presumably inherited from FireStream as default setting. 1000 is from GasCloud1. 
MaxDC				= 3

;----- AI State -----
StartStateAI			= 1
EndStateAI			= 28		; LaoTze: 19, presumably inherited from FireStream as default setting. 28 is from GasCloud1. 
StateAIAdvance			= 4		; LaoTze: 6, presumably inherited from FireStream as default setting. 4 is from GasCloud1. 
FinalDamageState		= 14
DeleteOnStateLimit		= yes
NextParticle			= ToxinPuffD

;----- GFX -----
Image				= GASBALL	;CLOUD1;TOXINALL;NULL
Animates			= yes
Frame				= 20
Translucency			= 50		; From GasCloud1, LaoTze didn't have this. 
Translucent50State		= 15
Translucent25State		= 10
Normalized			= yes
Shadow				= no
NoShadow			= yes

;----- Movement -----
Deacc				= 0.01
Velocity			= 35.0		; LaoTze. GasCloud1 has no Velocity at all, but adding this shouldn't affect Gas behaviour. 
WindEffect			= 0		; From GasCloud1, LaoTze didn't have this. 
Arcing				= yes		; Projectile stat, in case we need it for re-implementing the old system. Shouldn't do anything when this is instantiated as a particle. 
Inaccurate			= yes		; Ditto. 
FlakScatter			= yes		; Ditto. 
High				= no
SubjectToWalls			= yes		; Ditto. (From InvisibleA_LaoTze.) 
;SubjectToElevation		= yes		; Ditto. (From InvisibleA_LaoTze.) 
SubjectToCliffs			= yes		; Ditto. (From InvisibleA_LaoTze.) 

;----- Fuse -----
Proximity			= yes		; Ditto. (From InvisibleA_LaoTze.) 

;----- Payload -----
Damage				= 5
Warhead				= Toxin;gas
;Cluster			= 3		; Ditto. (From InvisibleA_LaoTze.) <= We do not use this. Instead, use the damage/warhead to tweak the rate and number of clouds spawned at the point of impact (since different weapons should spawn them at a different rate, and we don't want to create a different projectile for each of them). 

; Cloud of Poison Gas #1 Dissipation particle
[ToxinPuffD1]
Image=CLOUD1D
MaxDC=60
MaxEC=50
Damage=10
Warhead=Gas
StartFrame=0
EndStateAI=12
Translucency=50
WindEffect=0
BehavesLike=Gas
StateAIAdvance=4
DeleteOnStateLimit=yes

; the particle that makes up the fire stream of flamethrowers, and flame tanks
[FireStream]
Image=FLAMEALL
Damage=2
StartStateAI=1
DeleteOnStateLimit=yes
FinalDamageState=14

MaxDC=60
StartFrame=0

; Cloud of Poison Gas #1 Formation particle
[GasCloudM1]
Image=gaslrgmk
MaxDC=60
MaxEC=448
Damage=0
Warhead=Gas
StartFrame=0
EndStateAI=11
Translucency=50
WindEffect=0
BehavesLike=Gas
StateAIAdvance=3
NextParticle=GasCloud1
DeleteOnStateLimit=yes
NextParticleOffset=0,0,150

;------------------------------------------------------------------------------
; piercing projectile with poison
; A separate warhead is needed for weapons that pierce armor and have poison as an added effect. 
; Simply giving such a weapon's projectile a sub-weapon with the [Poison] warhead is not sufficient, because it will fail against targets with hazmat_* armor, and only the first-stage weapon's damage will be dealt. 
; This [Piercing_Poison] warhead will ignore hazmat_* armor and poison targets with that armor normally, but it will not work against targets ImmuneToPoison. 
; It should not be used on the weapon directly, since that would mean that hits themselves would not deal damage to ImmuneToPoison objects (worse even, a weapon using this warhead could not attack them). 
; Although that doesn't matter for the Syringe sniper, as the damage dealt is miniscule. 
; This means that the damage lost due 
[Piercing_Poison]:[Poison]
;----- Damage Ratios -----
; Do not reset the values for "resist_poison_*"
Versus.hazmat_100		= 1
Versus.hazmat_90		= 1
Versus.hazmat_80		= 1
Versus.hazmat_70		= 1
Versus.hazmat_60		= 1
Versus.hazmat_50		= 1
Versus.hazmat_40		= 1
Versus.hazmat_30		= 1
Versus.hazmat_20		= 1
Versus.hazmat_10		= 1
;Bullets			= yes

;------------------------------------------------------------------------------
; Poison
[Poison]:[Organic]

;----- Area of Effect -----
CellSpread			= .5
PercentAtMax			= .5

;----- Damage Ratios -----
Poison				= yes
Versus.hazmat_100		= 0%
Versus.hazmat_90		= 10%
Versus.hazmat_80		= 20%
Versus.hazmat_70		= 30%
Versus.hazmat_60		= 40%
Versus.hazmat_50		= 50%
Versus.hazmat_40		= 60%
Versus.hazmat_30		= 70%
Versus.hazmat_20		= 80%
Versus.hazmat_10		= 90%
Versus.resist_poison_100	= 0%
Versus.resist_poison_90		= 10%
Versus.resist_poison_80		= 20%
Versus.resist_poison_70		= 30%
Versus.hazmat60			= 40%
Versus.hazmat50			= 50%
Versus.hazmat40			= 60%
Versus.hazmat30			= 70%
Versus.hazmat20			= 80%
Versus.hazmat10			= 90%

;----- GFX -----
InfDeath			= 1
AnimList			= Poison

;----- AttachEffect -----
; This will fail on hazmat100 (cannot be poisoned). 
AttachEffect.Animation		= Poison					; This can vary with level. 
AttachEffect.Duration		= 360						; This can vary with level. 

[Toxin]
CellSpread=2
PercentAtMax=.5
Wood=yes
Verses=300%,200%,100%,60%,40%,20%,60%,40%,20%,100%,100%
InfDeath=8
;AnimList=TSPLASH
Particle=GasMistSys
;Bright=true
;Sparky=no
Fire=no
ProneDamage=300%
AffectsAllies=no
Poison=yes

; Acid
[Acid]
CellSpread			= .5
PercentAtMax			= .5
Verses				= 600%,500%,200%,60%,30%,5%,150%,100%,2%,200%,100%
ProneDamage			= 600%
AnimList			= Acid
InfDeath			= 7
Wall				= yes
Wood				= yes						; WoodAbsoluteDestroyer... :P

; Acid Splash
[Acid_Splash]:[Acid]
CellSpread			= 8
PercentAtMax			= .1 ;was .25
AnimList			= ACID;ACIDEXP	; this is what spawns the little ones

; needle with viral agent
; This is the virus 'bloat' death. 
[Virus]
Verses=100%,100%,100%,1%,1%,1%,1%,1%,1%,1%,100% ; see note in comments above about 1%
AnimList=PIFF
ProneDamage=100%
Bullets=yes
InfDeath=8



[Toxin2]
CellSpread=2
PercentAtMax=.5
Wood=yes
Verses=200%,150%,100%,30%,20%,10%,20%,15%,10%,40%,100%
InfDeath=8
;AnimList=TSPLASH
;Bright=true
;Sparky=no
Fire=no
ProneDamage=800%
AffectsAllies=no
Poison=yes

[ChemSpray]
Damage=200
ROF=100
Range=6
Projectile=Invisible
Speed=100
Warhead=Gas2
Report=FLAMTNK1

[Gas2]
Spread=512
Verses=200%,150%,100%,50%,30%
InfDeath=1
Particle=GasCloudSys
ProneDamage=300%    ; Gas concentrates at gound level

; Bio Toxin Spray
[CRBioToxin]
Damage=50
AmbientDamage=30
ROF=40
Range=6.75
Projectile=InvisibleA
Speed=1
Warhead=Toxin
Report=BioSpray
UseSparkParticles=yes
AttachedParticleSystem=ToxinSpraySys
Burst=1

[AcidSpray]:[PoisonSpray]
Warhead				= Acid

[AcidSpray_E]:[AcidSpray]
Damage				= 85

; wizard's stinking cloud
[Chemball]
Animates=yes
Image=TXGASG
Frames=20
;
Arcing=true
;Inaccurate=yes
;FlakScatter=yes
SubjectToCliffs=yes
SubjectToElevation=yes
SubjectToWalls=yes
Shadow=no

; wizard's stinking cloud
[ChemballE]
Animates=yes
Image=TXGASR
Frames=20
;
Arcing=true
;Inaccurate=yes
;FlakScatter=yes
SubjectToCliffs=yes
SubjectToElevation=yes
SubjectToWalls=yes
Shadow=no

[ConfuSpray]:[PoisonSpray]
Damage				= 70
Projectile			= ConfuPuff
Warhead				= PsychGas
AssaultAnim			= TXGASR

[ConfuSpray_E]:[ConfuSpray]
Damage				= 85

; wizard's stinking cloud
[Chemball]
Animates=yes
Image=TXGASG
Frames=20
;
Arcing=true
;Inaccurate=yes
;FlakScatter=yes
SubjectToCliffs=yes
SubjectToElevation=yes
SubjectToWalls=yes
Shadow=no

; wizard's stinking cloud
[ChemballE]
Animates=yes
Image=TXGASR
Frames=20
;
Arcing=true
;Inaccurate=yes
;FlakScatter=yes
SubjectToCliffs=yes
SubjectToElevation=yes
SubjectToWalls=yes
Shadow=no

[ConfuPuff]

